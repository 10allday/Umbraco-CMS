<div ng-controller="Umbraco.Editors.NodeLinkEditorController as vm" class="umb-linkpicker">

    <umb-editor-view>

        <umb-editor-header
            name="model.title"
            name-locked="true"
            hide-alias="true"
            hide-icon="true"
            hide-description="true">
        </umb-editor-header>

        <umb-editor-container class="block-form">
            <umb-box>
                <umb-box-content>

                    <umb-control-group label="{{model.nodeChangeLabel}}">
                        <umb-node-preview
                            ng-if="model.linkModel.isMedia !== true"
                            icon="model.linkModel.icon"
                            name="model.linkModel.name"
                            published="model.linkModel.published"
                            description="model.linkModel.url + (model.linkModel.queryString ? model.linkModel.queryString : '')"
                            allow-edit="true"
                            on-edit="vm.changeNode()">
                        </umb-node-preview>
                        <!-- IMAGE -->
                        <img ng-if="model.linkModel.isMedia === true && vm.media"
                            style="width: 100%;"
                            ng-class="{'trashed': vm.media.trashed}"
                            ng-src="{{vm.media.thumbnail}}"
                            ng-attr-title="{{vm.media.trashed ? (vm.labels.trashed || 'Trashed') + ': ' + vm.media.name : vm.media.name}}"
                            alt="{{vm.media.name}}"
                            ng-click="vm.changeNode()"/>
                    </umb-control-group>

                    <div ng-class="{'flex': vm.showAnchor}">


                        <umb-control-group label="@defaultdialogs_anchorLinkPicker" class="umb-linkpicker__anchor" ng-if="vm.showAnchor">
                            <input type="text"
                                    list="anchors"
                                    localize="placeholder"
                                    placeholder="@placeholders_anchor"
                                    class="umb-property-editor umb-textstring"
                                    ng-model="model.linkModel.queryString" />

                            <datalist id="anchors">
                                <option value="{{a}}" ng-repeat="a in anchorValues"></option>
                            </datalist>
                        </umb-control-group>
                    </div>

                    <umb-control-group label="@defaultdialogs_nodeNameLinkPicker">
                        <input type="text"
                                localize="placeholder"
                                placeholder="@placeholders_entername"
                                class="umb-property-editor umb-textstring"
                                ng-model="model.linkModel.name" />
                    </umb-control-group>

                    <umb-control-group ng-if="vm.showTarget" label="@content_target">
                        <umb-checkbox
                                      model="vm.openInNewWindow"
                                      on-change="vm.toggleOpenInNewWindow(model, value)"
                                      text="{{vm.labels.openInNewWindow}}">
                        </umb-checkbox>
                    </umb-control-group>

                </umb-box-content>
            </umb-box>
        </umb-editor-container>

        <umb-editor-footer>
            <umb-editor-footer-content-right>
                <umb-button
                    type="button"
                    button-style="link"
                    label-key="general_close"
                    shortcut="esc"
                    action="vm.close()">
                </umb-button>
                <umb-button
                    type="button"
                    button-style="success"
                    label-key="general_submit"
                    state="vm.saveButtonState"
                    action="vm.submit(model)">
                </umb-button>
            </umb-editor-footer-content-right>
        </umb-editor-footer>

    </umb-editor-view>

</div>
