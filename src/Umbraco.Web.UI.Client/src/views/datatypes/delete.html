<div class="umb-dialog umb-pane" ng-controller="Umbraco.Editors.DataType.DeleteController as vm">
    <div class="umb-dialog-body">

        <ng-switch on="currentNode.nodeType">
            <div ng-switch-when="container">

                <p class="abstract">
                    <localize key="defaultdialogs_confirmdelete">Are you sure you want to delete</localize>&nbsp;<strong>{{currentNode.name}}</strong>?
                </p>
                <umb-confirm on-confirm="vm.performContainerDelete"
                             on-cancel="vm.cancel"
                             confirm-button-style="danger"
                             confirm-label-key="general_delete">
                </umb-confirm>
            </div>

            <div ng-switch-default>


                    <umb-load-indicator ng-if="vm.loading === true"></umb-load-indicator>

                    <div ng-if="vm.loading === false && vm.hasReferences === false">
                        <p class="abstract">
                            <localize key="defaultdialogs_confirmdelete">Are you sure you want to delete</localize>&nbsp;<strong>{{currentNode.name}}</strong>?
                        </p>
                    </div>

                    <div ng-if="vm.loading === false && vm.hasReferences === true">

                        <p class="abstract">
                            <localize key="editdatatype_hasReferencesDeleteConsequence" tokens="[currentNode.name]">Deleting <strong>{{currentNode.name}}</strong> will have the following consequence</localize>
                        </p>

                        <hr/>

                        <!-- Document Types -->

                        <div ng-if="vm.references.documentTypes.length > 0">

                            <h5 class="mt4" style="margin-bottom: 20px;">
                                    <i class="icon-alert red"></i> <span class="red"><localize key="references_labelUsedByDocumentTypes"></localize></span>
                            </h5>

                            <table class="table table-condensed table-bordered">
                                <thead>
                                    <tr>
                                        <th><localize key="general_name">Name</localize></th>
                                        <th><localize key="references_usedByProperties">Used in</localize></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="relation in vm.references.documentTypes">
                                        <td><span title="{{::relation.name}}({{::relation.alias}})"><i class="umb-table-body__icon {{relation.icon}}"></i>{{::relation.name}}</span></td>
                                        <td><span>{{::relation.properties | CMS_joinArray:', ':'name'}}</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>


                        <!-- Media Types -->
                        <div ng-if="vm.references.mediaTypes.length > 0">

                            <h5 class="mt4" style="margin-bottom: 20px;">
                                <localize key="references_labelUsedByMediaTypes"></localize>
                            </h5>

                            <div class="umb-table">
                                <div class="umb-table-head">
                                    <div class="umb-table-row">
                                        <div class="umb-table-cell"></div>
                                        <div class="umb-table-cell umb-table__name not-fixed"><localize key="general_name">Name</localize></div>
                                        <div class="umb-table-cell"><localize key="references_usedByProperties">Used in</localize></div>
                                    </div>
                                </div>
                                <div class="umb-table-body">
                                    <div class="umb-table-row" ng-repeat="relation in vm.references.documentTypes">
                                        <div class="umb-table-cell"><i class="umb-table-body__icon {{relation.icon}}"></i></div>
                                        <div class="umb-table-cell umb-table__name"><span title="{{::relation.name}}({{::relation.alias}})">{{::relation.name}}</span></div>
                                        <div class="umb-table-cell --noOverflow"><span>{{::relation.properties | CMS_joinArray:', ':'name'}}</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <!-- Member Types -->
                        <div ng-if="vm.references.memberTypes.length > 0">

                            <h5 class="mt4" style="margin-bottom: 20px;">
                                <localize key="references_labelUsedByMemberTypes"></localize>
                            </h5>

                            <div class="umb-table">
                                <div class="umb-table-head">
                                    <div class="umb-table-row">
                                        <div class="umb-table-cell"></div>
                                        <div class="umb-table-cell umb-table__name not-fixed"><localize key="general_name">Name</localize></div>
                                        <div class="umb-table-cell"><localize key="references_usedByProperties">Used in</localize></div>
                                    </div>
                                </div>
                                <div class="umb-table-body">
                                    <div class="umb-table-row" ng-repeat="relation in vm.references.documentTypes">
                                        <div class="umb-table-cell"><i class="umb-table-body__icon {{relation.icon}}"></i></div>
                                        <div class="umb-table-cell umb-table__name"><span title="{{::relation.name}}({{::relation.alias}})">{{::relation.name}}</span></div>
                                        <div class="umb-table-cell --noOverflow"><span>{{::relation.properties | CMS_joinArray:', ':'name'}}</span></div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <umb-checkbox model="vm.confirmed" text="{{vm.labels.deleteConfirm}}">
                        </umb-checkbox>

                    </div>


                <umb-confirm ng-if="vm.confirmed || vm.hasReferences === false"
                            on-confirm="vm.performDelete"
                            on-cancel="vm.cancel"
                            confirm-button-style="danger"
                            confirm-label-key="general_delete">
                </umb-confirm>
            </div>
        </ng-switch>

    </div>
</div>
